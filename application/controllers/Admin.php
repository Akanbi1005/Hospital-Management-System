<?phpclass Admin extends CI_Controller {        var $user_id;    var $user_email;    var $user_data;        public function __construct()    {        parent::__construct();            $this->load->model('admin_model');                if( !$this->user_id = $this->session->user_id) redirect('login'); // No Access...                $this->user_data = $this->admin_model->userData($this->user_id);        $this->user_info = $this->admin_model->userinfo($this->session->user_email);            }            public function index()    {//        echo '<pre>';//        echo "$name, $email";////        die();//        $date = date('Y/m/d');//        $time = date('H:i:s');////        if ($this->user_data['access'] != 1 ) {                        $this->load->view('admin/header1');            $this->load->view('admin/nav');            $this->load->view('admin/body');        } else {            $this->load->view('admin/header');            $this->load->view('admin/nav2');            $this->load->view('admin/docindex');        }                $this->load->view('admin/footer');    }        public function new_patient_side(){        $this->load->view('admin/header1');        $this->load->view('admin/nav');        $this->load->view('admin/newpatientside');        $this->load->view('admin/footer');                }    public function viewpatientside(){                $this->load->view('admin/header1');        $this->load->view('admin/nav');        $this->load->view('admin/viewpatientside');        $this->load->view('admin/footer');    }    public function book(){                $this->load->view('admin/header1');        $this->load->view('admin/nav');        $this->load->view('admin/book');        $this->load->view('admin/footer');    }    public function com(){//        var_dump($this->user_data);        if (empty($this->user_info)){            $this->load->view('admin/header1');            $this->load->view('admin/nav');            $this->load->view('admin/com');            $this->load->view('admin/footer');        }else {            $this->load->view('admin/header1');            $this->load->view('admin/nav');            $this->load->view('admin/comm');            $this->load->view('admin/footer');        }    }    public function process(){       $a = $this->input->post('fname');       $b = $this->input->post('pnumber');        $c = $this->input->post('email');        $d = $this->input->post('ad');        $e = $this->input->post('age');        $f = $this->input->post('kin');        $g = $this->input->post('patientid');        $h = $this->input->post('mname');        $i = $this->input->post('height');        $j = $this->input->post('weight');        $k = $this->input->post('sex');        $l = $this->input->post('blood');        $m = $this->input->post('geno');                if(!$a || !$b || !$c || !$d || !$e || !$f || !$g || !$h || !$i || !$j || !$k || !$l || !$m ){            redirect('Admin/new_patient_side');            exit();        }else{            $data = array(                'fname' => "$a",                'pnumber' => "$b",                'email' => "$c",                'ad' => "$d",                'idcard' => "$g",                'age' => "$e",                'kin' => "$f",                'mname' => "$h",                'height' => "$i",                'weight' => "$j",                'sex' => "$k",                'blood' => "$l",                'geno' => "$m"            );            $this->db->insert('patient', $data);            redirect('Admin/viewpatientside');        }    }    public function view_complain(){        $this->load->view('admin/header1');        $this->load->view('admin/nav');        $this->load->view('admin/viewcomplain');        $this->load->view('admin/footer');    }    public function process_complain(){        $a = $this->input->post('fname');        $b = $this->input->post('email');        $c = $this->input->post('complain');        $d = $this->input->post('idcard');            if(!$a || !$b || !$c || !$d){            redirect('Admin/com');            exit();        }else{            $data = array(                'name' => "$a",                'email' => "$b",                'idcard' => "$d",                'complain' => "$c"            );            $this->db->insert('complains', $data);            redirect('Admin/view_complain');        }            }    public function new_patient(){                $this->load->view('admin/header1');        $this->load->view('admin/nav2');        $this->load->view('admin/newpatient');        $this->load->view('admin/footer');            }    public function  process_new_patient(){        if (empty($this->input->post('fname')||$this->input->post('pnumber')||$this->input->post('email')||$this->input->post('ad')||$this->input->post('idcard')||$this->input->post('age')||$this->input->post('kin')||$this->input->post('mname')||$this->input->post('height')||$this->input->post('weight')||$this->input->post('sex')||$this->input->post('blood')||$this->input->post('geno'))){                redirect('Admin/new_patient?id=all input fields must be set');                }else{                        $Fullname = $this->input->post('fname');            $phonenumber = $this->input->post('pnumber');            $Email = $this->input->post('email');            $Address = $this->input->post('ad');            $ID ="PA".$this->input->post('idcard');            $Age = $this->input->post('age')."Years";            $Kin = $this->input->post('kin');            $Mname = $this->input->post('mname');            $Height = $this->input->post('height')."cm";            $Weight = $this->input->post('weight')."kg";            $Sex = $this->input->post('sex');            $blood = $this->input->post('blood');            $geno = $this->input->post('geno');                $data = array(                'fname' => "$Fullname",                'pnumber' => "$phonenumber",                'email' => "$Email",                'ad' => "$Address",                'idcard' => "$ID",                'age' => "$Age",                'kin' => "$Kin",                'mname' => "$Mname",                'height' => "$Height",                'weight' => "$Weight",                'sex' => "$Sex",                'blood' => "$blood",                'geno' => "$geno"            );            $this->db->insert('patient', $data);            redirect('Admin/view-patient');        }            }    public function doctors_diag(){                $msg = '';                if(!empty($this->input->post())){            $post = $this->input->post();            if(empty($post['idcard'])){                $msg = notify('Please enter patience ID');            }            elseif (empty($post['docreview'])){                $msg = notify('Please enter patience Doctor Review');            }            elseif (empty($post['docpre'])){                $msg = notify('Please enter patience Doctor Precription');            }elseif (empty($post['docpre']&&$post['docreview']&&$post['idcard'])){                $msg = notify('Please enter details to Proceed with Diagnois');            }            else{                $msg = notify('Thank you. Input Sucessful', 'success');                    $date = date('Y/m/d H:i:s');                $time = date('H:i:s');                                $data = array(                    'idcard' => "PA".$post['idcard'],                    'docreview' => $post['docreview'],                    'docpre' => $post['docpre'],                    'date' => $post['date'],                    'register' =>"$date"                );                $this->db->insert('doc',$data);                redirect('');                //....            }        }                $data['msg'] = $msg;                $this->load->view('admin/header');        $this->load->view('admin/nav2');        $this->load->view('admin/doc', $data);//        $this->load->view('admin/footer');            }    public function view_patient(){        $this->db->select('*');        $this->db->from('patient');        $data['precords'] = $this->db->get()->result_array();                        $this->load->view('admin/header1');        $this->load->view('admin/nav2');        $this->load->view('admin/viewpatientdoc', $data);        $this->load->view('admin/footer');            }        public function veiwrecord($idcard){                $this->db->select('*');        $this->db->from('patient');        $this->db->where(['idcard' => $idcard]);        $data['record']  = $this->db->get()->row_array();        $this->load->view('admin/header1');        $this->load->view('admin/nav2');        $this->load->view('admin/view', $data);        $this->load->view('admin/footer');    }    public function record_edit($idcard){                if (!empty($this->input->post())){            $data = array(                'fname' => $this->input->post('fname'),                'pnumber'  => $this->input->post('pnumber'),                'email' => $this->input->post('email'),                'ad'  => $this->input->post('ad'),                'age'  => $this->input->post('age'),                'kin' => $this->input->post('kin'),                'mname'  => $this->input->post('mname'),                'height' => $this->input->post('height'),                'weight'  => $this->input->post('weight'),                'sex' => $this->input->post('sex'),                'blood'  => $this->input->post('blood'),                'geno'  => $this->input->post('geno')            );                $this->db->update('patient', $data, ['idcard' => "$idcard"]);                }        $this->db->select('*');        $this->db->from('patient');        $this->db->where(['idcard' => $idcard]);        $data['record']  = $this->db->get()->row_array();                $this->load->view('admin/header1');        $this->load->view('admin/nav2');        $this->load->view('admin/editpage', $data);        $this->load->view('admin/footer');                   }    public function deleterecord($idcard){        $this->db->where('idcard', $idcard);        $this->db->delete('patient');        redirect('Admin/view-patient');    }    public function docside(){        $this->db->select('*');        $this->db->from('doc');        $data['records'] = $this->db->get()->result_array();                $this->load->view('admin/header1');        $this->load->view('admin/nav2');        $this->load->view('admin/docside',$data);        $this->load->view('admin/footer');    }    public function doc_side_view($idcard){            $data['join'] = $this->admin_model->joininfo($idcard);                $this->load->view('admin/header1');        $this->load->view('admin/nav2');        $this->load->view('admin/docsideview',$data);        $this->load->view('admin/footer');    }    public function docedit($idcard){                if (!empty($this->input->post())){            $data = array(                'docreview' => $this->input->post('review'),                'docpre'  => $this->input->post('pre')            );//            echo "<pre>";//            print_r($this->input->post());//            die();            $this->db->update('doc', $data, ['idcard' => "$idcard"]);                }        $this->db->select('*');        $this->db->from('doc');        $this->db->where(['idcard' => $idcard]);        $data['record']  = $this->db->get()->row_array();                        $this->load->view('admin/header1');        $this->load->view('admin/nav2');        $this->load->view('admin/docedit',$data);        $this->load->view('admin/footer');    }    public function doc_delete($idcard){        $this->db->where('idcard', $idcard);        $this->db->delete('doc');        redirect('Admin/docside');            }    public function doc_details($idcard){        $data['join'] = $this->admin_model->joininfo($idcard);                        $this->load->view('admin/header1');        $this->load->view('admin/nav2');        $this->load->view('admin/join',$data);        $this->load->view('admin/footer');            }    public function docside_complain(){        $this->db->select('*');        $this->db->from('complains');        $data['pcomplain'] = $this->db->get()->result_array();                $this->load->view('admin/header1');        $this->load->view('admin/nav2');        $this->load->view('admin/patientcomplain', $data);        $this->load->view('admin/footer');            }    public function doc_complain_view($idcard){        $this->db->select('*');        $this->db->from('complains');        $this->db->where(['idcard' => $idcard]);        $data['name'] = $this->db->get()->row_array();                $this->load->view('admin/header1');        $this->load->view('admin/nav2');        $this->load->view('admin/complain',$data);        $this->load->view('admin/footer');            }    public function doctors_com_delete($idcard){        $this->db->where('idcard', $idcard);        $this->db->delete('complains');        redirect('Admin/doc-complain-view/'.$idcard);            }}